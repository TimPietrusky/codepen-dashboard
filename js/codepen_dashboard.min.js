var colors={alpha:"#f7464a",beta:"#e2eae9",gamma:"#2980b9",delta:"#ff0",epsilon:"#0f0"},result={hearts:0,views:0,comments:0,max_hearts:0,max_views:0,max_comments:0},pens,size=110,strokeWidth=3,page=1,page_max=3,run=!1,dashboard=$(".dashboard"),loading=$(".loading");breakpoint();
function getData(b,a){$.ajax({dataType:"jsonp",jsonp:"jsonp",url:"http://codepen-awesomepi.timpietrusky.com/"+a+"/"+page,success:function(d){if(null!=d.content){if(null==pens)pens=d.content.pens;else for(var c=0;c<d.content.pens.length;c++)pens.push(d.content.pens[c]);++page<=page_max?getData(b,a):generateDashboard(b)}}})}
function generateDashboard(b){for(var a=0;a<pens.length;a++)result.hearts+=pens[a].hearts,result.views+=pens[a].views,result.comments+=pens[a].comments,result.max_hearts<=pens[a].hearts&&(result.max_hearts=pens[a].hearts),result.max_views<=pens[a].views&&(result.max_views=pens[a].views),result.max_comments<=pens[a].comments&&(result.max_comments=pens[a].comments);for(a=0;a<pens.length;a++){var d=pens[a],c=d.user.realname,e=d.title;-1!=(pos=c.search(/Pro/))&&(c=c.slice(0,c.length-4),c+='<span class="iota">PRO</span>');
null==e&&(e="A Pen by "+c);c=$("<section></section>").loadTemplate($("#template"),{title:e,author:c,authorPicture:d.user.gravatar,penPicture:"http://codepen.io/"+b+"/pen/"+d.hash+"/image/large.png",description:d.description,url:d.url.pen});e=[{value:pens[a].hearts,color:colors.alpha},{value:result.max_hearts-pens[a].hearts,color:colors.beta}];newChart("Hearts",e,d,c);e=[{value:pens[a].views,color:colors.gamma},{value:result.max_views-pens[a].views,color:colors.beta}];newChart("Views",e,pens[a],c);
e=[{value:pens[a].comments,color:colors.delta},{value:result.max_comments-pens[a].comments,color:colors.beta}];newChart("Comments",e,pens[a],c);run=!1}}
function newChart(b,a,d,c){var e=newCanvas();(new Chart(e.ctx)).Doughnut(a,{segmentStrokeWidth:strokeWidth,animateScale:!0,animationSteps:120,percentageInnerCutout:70});var f=d.url.pen,g=d.user.nickname;a=b.toLowerCase();run||(c.find("h2").wrapAll('<a href="'+f+'" target="_blank"/>'),c.find(".pen__link").wrapAll('<a href="'+f+'" target="_blank" />'),c.find(".author img").wrapAll('<a href="http://codepen.io/'+g+'" target="_blank" />'),c.find(".author h3").wrapAll('<a href="http://codepen.io/'+g+'" target="_blank" />'),
run=!0);c.find(".title").append(b);b=$("<td></td>").append(e.canvas);b.append($('<div class="zeta">'+d[a]+"</div>"));c.find(".chart").append(b);dashboard.append(c);loading.filter(":visible")&&loading.hide()}function newCanvas(){var b=$('<canvas width="'+size+'" height="'+1.5*size+'"></canvas>');return{canvas:b,ctx:b.get(0).getContext("2d")}}function template(b){return $("<div />").loadTemplate($("#"+b.name),b)}function breakpoint(){var b=window.innerWidth;void 0!=b&&2200<b&&(size=150)}
getData("TimPietrusky","picks");var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-5596313-1"]);_gaq.push(["_setDomainName","timpietrusky.com"]);_gaq.push(["_trackPageview"]);(function(){var b=document.createElement("script");b.type="text/javascript";b.async=!0;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();